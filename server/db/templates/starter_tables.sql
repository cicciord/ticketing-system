BEGIN TRANSACTION;
CREATE TABLE IF NOT EXISTS "Users" (
	"id"	INTEGER NOT NULL UNIQUE,
	"username"	TEXT NOT NULL UNIQUE,
	"password"	TEXT NOT NULL,
	"salt"	TEXT NOT NULL,
	"admin"	INTEGER DEFAULT 0 CHECK("admin" IN (0, 1)),
	PRIMARY KEY("id" AUTOINCREMENT)
);
CREATE TABLE IF NOT EXISTS "AdditionalContents" (
	"id"	INTEGER NOT NULL UNIQUE,
	"ticket_id"	INTEGER NOT NULL,
	"author_id"	INTEGER NOT NULL,
	"timestamp"	INTEGER NOT NULL,
	"text"	TEXT NOT NULL,
	PRIMARY KEY("id" AUTOINCREMENT),
	FOREIGN KEY("author_id") REFERENCES "Users"("id"),
	FOREIGN KEY("ticket_id") REFERENCES "Tickets"("id")
);
CREATE TABLE IF NOT EXISTS "Tickets" (
	"id"	INTEGER NOT NULL UNIQUE,
	"owner_id"	INTEGER NOT NULL,
	"state"	INTEGER DEFAULT 1 CHECK("state" IN (0, 1)),
	"category"	TEXT NOT NULL CHECK("category" IN ("inquiry", "maintenance", "new feature", "administrative", "payment")),
	"title"	TEXT NOT NULL,
	"timestamp"	INTEGER NOT NULL,
	"text"	TEXT NOT NULL,
	PRIMARY KEY("id"),
	FOREIGN KEY("owner_id") REFERENCES "Users"("id")
);
INSERT INTO "Users" VALUES (1,'admin1','082d67e7760628ec6f5c6ce8af25810c8df39d8a07f3de69a3e2a349cb06a43c5313cf9848833d71b085b2352da9e6abd36ce88003a7b41afc184167f57fd679','6f0205f9f222a977ca5bb316754ea725',1);
INSERT INTO "Users" VALUES (2,'admin2','a8c3d449d8f603ce164472f6b65d78a4968266f8369760061fcde37c05908b823f84e57170dd89f0aca9a5cafbf7fdee6e164c2deb0484717a81f7b8af8fea1d','650677c4ca489ed8ae03544ea5e8c148',1);
INSERT INTO "Users" VALUES (3,'user1','abb094b246266f10a714ecd3056ca4850526ae4fe75ff6ea578b9ed61abf14bace8c2d900581849edb2eef8de41c182eb18299091e71b8921de6b83f00721035','f1600a3c3308767ea342b72b2ee4387f',0);
INSERT INTO "Users" VALUES (4,'user2','4dd4f7c4a57c1eb8dae36d05b673ddd15cd5ec313da531be7efafc2578c1b6ebf46bd25991189597362f8db476ab62513d3c13b50f46721b0f7e13db1375768a','e1eb4f8268c2dc5a61c34830b29c3ada',0);
INSERT INTO "Users" VALUES (5,'user3','f55d68e86c9b9cee8f88c54322729148fc5c935d55c33de05d3e4057bb93b2e376e524aa7105333bcde37d81018bc49cfee4cb5f189d74c4c8e55add429d79e8','13cb29e30d0095a835aabc7e6b7c37d2',0);
COMMIT;
